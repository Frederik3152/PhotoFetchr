{% extends "base.html" %}

{% block title %}Search - PhotoFetchr{% endblock %}

{% block content %}
<div class="container">
    <!-- Search Header -->
    <div class="search-header">
        <div class="breadcrumb">
            <a href="{{ url_for('homepage') }}" class="breadcrumb-btn">Home</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span>Search</span>
        </div>
        <h2>Search & Filtering</h2>

        <!-- Main Search Bar -->
        <div class="search-main">
            <div class="search-container large">
                <input type="text" class="search-input" placeholder="Search your photos..." id="main-search" value="{{ search_query or '' }}">
                <button class="search-btn" id="main-search-btn">üîç Search</button>
            </div>
        </div>
    </div>

    <div class="search-layout">
        <!-- Filters Sidebar -->
        <aside class="filters-sidebar">
            <div class="filters-header">
                <h4>Filters</h4>
                <button class="btn btn--outline btn--sm" id="clear-filters">Clear All</button>
            </div>

            <!-- Active Filters -->
            <div class="active-filters" id="active-filters">
                <!-- Filter chips will appear here -->
            </div>

            <!-- Filter Sections -->
            <div class="filter-section">
                <h5>Country</h5>
                <select class="form-control" id="country-filter">
                    <option value="">All Countries</option>
                    {% for country in countries %}
                    <option value="{{ country }}">{{ country }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="filter-section">
                <h5>People</h5>
                <div class="people-filter-container">
                    <input type="text" class="form-control" placeholder="Search people..." id="people-search">
                    <div class="people-list" id="people-list">
                        {% for person in people %}
                        <div class="person-checkbox">
                            <input type="checkbox" id="person-{{ loop.index }}" value="{{ person[0] if person is sequence else person }}">
                            <label for="person-{{ loop.index }}">{{ person[0] if person is sequence else person }}</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="filter-section">
                <h5>Date Range</h5>
                <div class="date-range-container">
                    <input type="date" class="form-control" id="date-from" placeholder="From">
                    <input type="date" class="form-control" id="date-to" placeholder="To">
                </div>
            </div>
        </aside>

        <!-- Search Results -->
        <div class="search-results">
            <div class="results-header">
                <div class="results-info">
                    <span class="results-count" id="results-count">Search photos using filters or keywords</span>
                </div>
                <div class="results-controls">
                    <select class="form-control" id="sort-select">
                        <option value="date">Date Added</option>
                        <option value="title">Title (A-Z)</option>
                    </select>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">‚äû</button>
                        <button class="view-btn" data-view="list">‚ò∞</button>
                    </div>
                </div>
            </div>

            <div class="photos-grid" id="search-results">
                <!-- Search results will be populated here -->
            </div>
        </div>
    </div>
</div>

<!-- Photo Detail Modal -->
<div class="photo-detail-modal" id="photo-detail" style="display: none;">
    <div class="modal-backdrop" id="modal-backdrop"></div>
    <div class="modal-container">
        <button class="modal-close" id="detail-close">√ó</button>
        <div class="detail-content">
            <div class="detail-image-section">
                <img id="detail-image" src="" alt="" class="detail-photo">
            </div>
            <div class="detail-sidebar">
                <h2 id="detail-title" class="photo-title">Photo Title</h2>

                <div class="metadata-grid">
                    <div class="meta-item">
                        <span class="meta-label">üìÖ Date Taken</span>
                        <span class="meta-value" id="detail-date">-</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">üåç Country</span>
                        <span class="meta-value" id="detail-country">-</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">üìÅ File Size</span>
                        <span class="meta-value" id="detail-filesize">-</span>
                    </div>
                </div>

                <div class="people-section">
                    <h4>üë• People in Photo</h4>
                    <div class="people-tags" id="detail-people">
                        <!-- People tags populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
