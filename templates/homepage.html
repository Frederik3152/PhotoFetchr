{% extends "base.html" %}

{% block title %}PhotoFetchr{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <section class="hero-section">
        <h2 class="hero-title">Your Photo Collection</h2>
        <p class="hero-subtitle">Organize, search, and discover your memories TESTING!!</p>

        <!-- Hero Search -->
        <div class="hero-search">
            <form class="search-container large" action="{{ url_for('search') }}" method="GET">
                <input type="text" class="search-input" name="q" placeholder="Search your photos..." />
                <button type="submit" class="search-btn">üîç Search</button>
            </form>
        </div>
        
        <!-- Stats Overview -->
        <div class="stats-overview">
            <div class="stat-item">
                <span class="stat-number">{{ stats.total_photos|format_number }}</span>
                <span class="stat-label">Photos</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.total_countries }}</span>
                <span class="stat-label">Countries</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.total_people }}</span>
                <span class="stat-label">People</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ stats.storage_used }}</span>
                <span class="stat-label">Storage</span>
            </div>
        </div>
        
        <div class="upload-cta">
            <a href="{{ url_for('upload') }}" class="btn btn--primary btn--lg">üì§ Upload Photos</a>
        </div>
    </section>

    <!-- Recent Photos Section -->
    <section class="recent-section">
        <div class="section-header">
            <h3>Recent Photos</h3>
            <a href="{{ url_for('search') }}" class="btn btn--outline">View All</a>
        </div>
        
        <div class="photos-grid">
            {% if recent_photos %}
                {% for photo in recent_photos %}
                <div class="photo-card" onclick="showPhotoDetail('{{ photo.id }}')">
                    <div class="photo-thumbnail">
                        <img src="{{ photo.thumbnail_url }}" 
                             alt="{{ photo.file_name }}" loading="lazy">
                        <div class="photo-overlay">
                        </div>
                    </div>
                    <div class="photo-info">
                        <h4 class="photo.file_name">{{ photo.file_name }}</h4>
                        <div class="photo-meta">
                            <span>üìç {{ photo.location }}</span>
                            {% if photo.date_taken %}
                            <span>üìÖ {{ photo.date_taken|format_date }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
            <div class="empty-state">
                <div class="empty-content">
                    <div class="empty-icon">üì∑</div>
                    <h3>No Photos Yet</h3>
                    <p>Start building your collection by uploading your first photos!</p>
                    <a href="{{ url_for('upload') }}" class="btn btn--primary">Upload Photos</a>
                </div>
            </div>
            {% endif %}
        </div>
    </section>
</div>
<div class="photo-detail-modal" id="photo-detail" style="display: none;">
    <div class="modal-backdrop" id="modal-backdrop"></div>
    <div class="modal-container">
        <button class="modal-close" id="detail-close">√ó</button>
        <button class="rotate-btn" id="rotate-btn" title="Rotate 90¬∞ clockwise">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
        </button>
        <div class="detail-content">
            <div class="detail-image-section">
                <img id="detail-image" src="" alt="" class="detail-photo">
            </div>
            <div class="detail-sidebar">
                <h2 id="detail-title" class="photo-title">Photo Title</h2>

                <div class="metadata-grid">
                    <div class="meta-item">
                        <span class="meta-label">üìÖ Date Taken</span>
                        <span class="meta-value" id="detail-date">-</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">üåç Country</span>
                        <span class="meta-value" id="detail-country">-</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">üìÅ File Size</span>
                        <span class="meta-value" id="detail-filesize">-</span>
                    </div>
                </div>

                <div class="people-section">
                    <h4>üë• People in Photo</h4>
                    <div class="people-tags" id="detail-people">
                        <!-- People tags populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
